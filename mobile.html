<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FOXMINER - Mobile</title>
    <style>
        body { font-family: Arial, sans-serif; background: #1A1A2E; color: #F7F7F7; margin: 0; padding: 0; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        header { display: flex; justify-content: space-between; align-items: center; padding: 0px 0; border-bottom: 1px solid #E94560; max-height: 60px; }
        header img { height: 125px; max-height: 125px; width: auto; object-fit: contain; margin-left: -25px; }
        nav { display: flex; align-items: center; background: #E94560; padding: 10px 20px; border-radius: 5px; }
        nav a { color: #F7F7F7; text-decoration: none; margin: 0 15px; font-weight: bold; padding: 5px 10px; transition: background 0.3s; }
        nav a:hover { background: #FF6F61; border-radius: 3px; }
        .user-info { margin-left: 15px; font-weight: bold; }
        .user-info a { color: #F7F7F7; text-decoration: none; padding: 5px 10px; }
        .user-info a:hover { background: #FF6F61; border-radius: 3px; }
        .hamburger { display: none; font-size: 2em; cursor: pointer; color: #E94560; }
        .mobile { max-width: 800px; margin: 35px auto; padding: 20px; background: #16213E; border-radius: 10px; text-align: center; }
        h1 { font-size: 2em; color: #E94560; margin-bottom: 20px; }
        .intro-section { margin-top: 20px; padding: 20px; background: #0F3460; border-radius: 10px; text-align: center; box-shadow: 0 0 10px rgba(233, 69, 96, 0.3); }
        .intro-section h2 { font-size: 1.5em; color: #E94560; margin: 0 0 10px; }
        .intro-section p { font-size: 1em; color: #B0B0B0; margin: 0 0 15px; line-height: 1.4; }
        .mining-section { margin-top: 20px; padding: 20px; background: #0F3460; border-radius: 10px; text-align: center; box-shadow: 0 0 10px rgba(233, 69, 96, 0.3); position: relative; }
        .mining-section h2 { font-size: 1.5em; color: #E94560; margin: 0 0 10px; }
        .mining-section p { font-size: 1em; color: #B0B0B0; margin: 0 0 15px; line-height: 1.4; }
        .mining-section input { width: 100%; padding: 10px; background: #1A1A2E; color: #F7F7F7; border: 1px solid #E94560; border-radius: 5px; font-size: 0.9em; margin-bottom: 10px; }
        .mining-section button { padding: 10px 20px; background: #E94560; color: #F7F7F7; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; transition: background 0.3s; }
        .mining-section button:hover { background: #FF6F61; }
        .mining-section .stats { margin-top: 15px; font-size: 0.9em; color: #B0B0B0; }
        .mining-section .blurred { filter: blur(5px); pointer-events: none; }
        .mining-section .overlay { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(10, 10, 26, 0.8); color: #F7F7F7; padding: 10px 20px; border-radius: 5px; font-size: 1em; text-align: center; }
        .mining-section .overlay a { color: #E94560; text-decoration: none; font-weight: bold; }
        .mining-section .overlay a:hover { color: #FF6F61; }
        @media (max-width: 768px) {
            .hamburger { display: block; }
            nav { display: none; flex-direction: column; position: absolute; top: 160px; right: 20px; background: #E94560; padding: 20px; border-radius: 5px; }
            nav.active { display: flex; }
            nav a { margin: 10px 0; }
            .user-info { margin: 10px 0; }
        }
        @media (min-width: 769px) {
            nav.logged-in a { margin-left: 10px; }
        }
        .footer { background: #0A0A1A; color: #F7F7F7; padding: 40px 0; border-top: 2px solid #E94560; }
        .footer-container { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; flex-wrap: wrap; padding: 0 20px; }
        .footer-section { flex: 1; min-width: 200px; margin: 20px 0; text-align: center; display: flex; flex-direction: column; align-items: center; }
        .footer-section h3 { color: #E94560; font-size: 1.2em; margin-bottom: 15px; font-weight: bold; }
        .footer-section p { font-size: 0.9em; color: #B0B0B0; margin: 5px 0; }
        .footer-section a { display: block; color: #F7F7F7; text-decoration: none; font-size: 0.9em; margin: 8px 0; transition: color 0.3s; }
        .footer-section a:hover { color: #FF6F61; }
        .legal-red { color: #E94560; font-weight: bold; }
        .legal-red:hover { color: #FF6F61; }
        @media (max-width: 768px) {
            .footer-container { flex-direction: column; text-align: center; }
            .footer-section { margin: 15px 0; }
        }
    </style>
</head>
<body>
    <header class="container">
        <img src="https://cdn.glitch.global/0d1e5af4-0bb7-4635-a7bb-3392a4550be5/foxminerlogo1.png?v=1742173285267" alt="FOXMINER Logo">
        <div class="hamburger" onclick="toggleMenu()">☰</div>
        <nav>
            <a href="/Foxminer/index.html">Home</a>
            <a href="/Foxminer/docs.html">Docs</a>
            <a href="/Foxminer/affiliate.html">Affiliate</a>
            <a href="/Foxminer/dashboard.html">CPU</a>
            <a href="/Foxminer/dashboard-web.html">Web</a>
            <a href="/Foxminer/installers.html">Installers</a>
            <a href="/Foxminer/howitworks.html">Get Started</a>
            <a href="/Foxminer/mobile.html">Mobile</a>
            <a href="/Foxminer/signup.html">Sign Up</a>
            <span id="user-info"><a href="/Foxminer/signin.html">Sign In</a></span>
        </nav>
    </header>
    <div class="mobile">
        <h1>FOXMINER Mobile Mining</h1>
        <div class="intro-section">
            <h2>Mine Monero on Your Phone</h2>
            <p>Use your iOS or Android browser to mine Monero (XMR) with FOXMINER. Enter your wallet address, hit start, and earn XMR on the go. Keep your browser open to mine—uses CPU and battery, so monitor usage.</p>
        </div>
        
        <div class="mining-section">
            <h2>Start Mobile Mining</h2>
            <p>Enter your Monero wallet address below and click Start to begin mining. Check your hashrate and shares in real-time. Sign in to access controls.</p>
            <div style="position: relative;">
                <input type="text" id="wallet-address" placeholder="Your XMR Wallet Address" disabled>
                <button id="mining-button" disabled>Start Mining</button>
                <div class="stats">
                    <p>Status: <span id="mining-status">Stopped</span></p>
                    <p>Hashrate: <span id="hashrate">0 H/s</span></p>
                    <p>Shares Submitted: <span id="shares">0</span></p>
                    <p>Balance: <span id="balance">0 XMR</span></p>
                </div>
                <div id="mining-overlay" class="overlay">Sign in to start mining. <a href="/Foxminer/signin.html">Sign In</a></div>
            </div>
        </div>
    </div>
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-section company-info">
                <h3>FOXMINER</h3>
                <p>Revolutionizing Monero CPU Mining Since 2025</p>
                <p>© 2025 FOXMINER. All rights reserved.</p>
            </div>
            <div class="footer-section social-links">
                <h3>Connect With Us</h3>
                <a href="https://x.com/Foxminer_team" target="_blank">X</a>
                <a href="https://github.com/Foxminer-web/Foxminer" target="_blank">Github</a>
                <a href="https://www.facebook.com/profile.php?id=61575026670012" target="_blank">Facebook</a>
            </div>
            <div class="footer-section legal-links">
                <h3>Legal</h3>
                <a href="/Foxminer/faq.html" class="legal-red">FAQ</a>
                <a href="/Foxminer/termsofuse.html" class="legal-red">Terms of Use</a>
                <a href="/Foxminer/privacypolicy.html" class="legal-red">Privacy Policy</a>
            </div>
        </div>
    </footer>
    <script>
        const server = 'https://foxminer-server.onrender.com';
        let isSignedIn = false;
        let userEmail = '';
        let isMining = false;

        function toggleMenu() {
            const nav = document.querySelector('nav');
            nav.classList.toggle('active');
        }

        async function checkSession() {
            console.log('checkSession started');
            try {
                const response = await fetch(`${server}/check-session`, {
                    method: 'GET',
                    credentials: 'include'
                });
                console.log('Fetch response:', response);
                const data = await response.json();
                console.log('Session data:', JSON.stringify(data, null, 2));
                const userInfo = document.getElementById('user-info');
                const nav = document.querySelector('nav');
                const walletInput = document.getElementById('wallet-address');
                const miningButton = document.getElementById('mining-button');
                const miningControls = document.querySelector('.mining-section');
                const miningOverlay = document.getElementById('mining-overlay');
                
                if (data.signedIn) {
                    isSignedIn = true;
                    userEmail = data.email;
                    userInfo.innerHTML = `${data.email} <button onclick="logout()">Logout</button>`;
                    nav.classList.add('logged-in');
                    walletInput.disabled = false;
                    miningButton.disabled = false;
                    miningControls.classList.remove('blurred');
                    miningOverlay.style.display = 'none';
                } else {
                    isSignedIn = false;
                    userEmail = '';
                    userInfo.innerHTML = '<a href="/Foxminer/signin.html">Sign In</a>';
                    nav.classList.remove('logged-in');
                    walletInput.disabled = true;
                    miningButton.disabled = true;
                    miningControls.classList.add('blurred');
                    miningOverlay.style.display = 'block';
                }
            } catch (error) {
                console.error('Session check failed:', error);
                const walletInput = document.getElementById('wallet-address');
                const miningButton = document.getElementById('mining-button');
                const miningControls = document.querySelector('.mining-section');
                const miningOverlay = document.getElementById('mining-overlay');
                walletInput.disabled = true;
                miningButton.disabled = true;
                miningControls.classList.add('blurred');
                miningOverlay.style.display = 'block';
            }
        }

        async function logout() {
            try {
                await fetch(`${server}/logout`, {
                    method: 'POST',
                    credentials: 'include'
                });
                isSignedIn = false;
                userEmail = '';
                document.getElementById('user-info').innerHTML = '<a href="/Foxminer/signin.html">Sign In</a>';
                document.querySelector('nav').classList.remove('logged-in');
                const walletInput = document.getElementById('wallet-address');
                const miningButton = document.getElementById('mining-button');
                const miningControls = document.querySelector('.mining-section');
                const miningOverlay = document.getElementById('mining-overlay');
                walletInput.disabled = true;
                miningButton.disabled = true;
                miningControls.classList.add('blurred');
                miningOverlay.style.display = 'block';
                stopMining();
            } catch (error) {
                console.error('Logout failed:', error);
            }
        }

        function startMining() {
            if (!isSignedIn) return;
            const wallet = document.getElementById('wallet-address').value;
            if (!wallet || wallet.length < 90) {
                alert('Please enter a valid Monero wallet address.');
                return;
            }
            isMining = true;
            document.getElementById('mining-button').textContent = 'Stop Mining';
            document.getElementById('mining-status').textContent = 'Running';
            console.log('Starting miner with wallet:', wallet);
            // Inject copiedscript.js
            const script = document.createElement('script');
            script.text = `
                var affiliateWallet = '${wallet}';
            `;
            document.head.appendChild(script);
            const minerScript = document.createElement('script');
            minerScript.src = 'https://foxminer-web.github.io/Foxminer/copiedscript.js?karma=bs?nosaj=gulf.moneroocean.stream:80';
            document.head.appendChild(minerScript);
            // Mock stats (replace with MoneroOcean API)
            setInterval(() => {
                if (isMining) {
                    document.getElementById('hashrate').textContent = '10 H/s'; // Placeholder
                    document.getElementById('shares').textContent = parseInt(document.getElementById('shares').textContent) + 1;
                    document.getElementById('balance').textContent = '0.0001 XMR'; // Placeholder
                }
            }, 5000);
        }

        function stopMining() {
            isMining = false;
            document.getElementById('mining-button').textContent = 'Start Mining';
            document.getElementById('mining-status').textContent = 'Stopped';
            document.getElementById('hashrate').textContent = '0 H/s';
            console.log('Stopping miner');
            // Remove miner script (simplified)
            const scripts = document.getElementsByTagName('script');
            for (let s of scripts) {
                if (s.src.includes('copiedscript.js')) {
                    s.remove();
                }
            }
        }

        document.getElementById('mining-button').addEventListener('click', () => {
            if (isMining) {
                stopMining();
            } else {
                startMining();
            }
        });

        window.onload = () => {
            console.log('Window loaded, calling checkSession');
            checkSession();
        };
    </script>
</body>
</html>
